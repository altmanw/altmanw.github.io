<!doctype html>
<html
  itemscope
  class=""
  lang="en-us"
  itemtype="http://schema.org/WebPage">
  <head>
    
    <meta charset="utf-8" />


<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=5" />


<meta name="theme-name" content="hugoplate" />















<link rel="shortcut icon" href="/images/favicon_hu8746059088890723258.png" type="image/x-icon">
<link rel="icon" href="/images/favicon_hu8746059088890723258.png" type="image/x-icon">
<link rel="icon" type="image/png" sizes="48x48" href="/images/favicon_hu11713732441643767409.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon_hu8746059088890723258.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon_hu13781583406303279869.png">








<link rel="manifest" href="/manifest.webmanifest" />
<meta
  name="msapplication-TileColor"
  content="#ddd" />
<meta
  name="theme-color"
  content="#ffffff" />






















  <base href="https://willaltman.tech/webgl/primitives/" />







  
  


<title>Building a Cylinder Primitive</title>















  <meta
    name="keywords"
    content="Altman, GameDev, Developer" />




<meta
  name="description"
  content="Building a Cylinder Primitive" />



  <meta name="author" content="Will Altman" />






  
  












  

  
  
  


  
  


  





<meta property="og:title" content="Building a Cylinder Primitive" />
<meta property="og:description" content="Building a Cylinder Primitive" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://willaltman.tech/webgl/primitives/" />


<meta name="twitter:title" content="Building a Cylinder Primitive" />
<meta name="twitter:description" content="Building a Cylinder Primitive" />


  <meta name="twitter:site" content="@PrizmROBLOX" />


  <meta name="twitter:creator" content="@Will Altman" />



















<script>
  let indexURL = "https://willaltman.tech/searchindex.json";
  let includeSectionsInSearch = ["blog"];
  let search_no_results = "No results for";
  let search_initial_message = "Type something to search..";
</script>























    
    
<meta http-equiv="x-dns-prefetch-control" content="on" />
<link rel="preconnect" href="https://use.fontawesome.com" crossorigin />
<link rel="preconnect" href="//cdnjs.cloudflare.com" />
<link rel="preconnect" href="//www.googletagmanager.com" />
<link rel="preconnect" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="https://use.fontawesome.com" />
<link rel="dns-prefetch" href="//ajax.googleapis.com" />
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
<link rel="dns-prefetch" href="//www.googletagmanager.com" />
<link rel="dns-prefetch" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//connect.facebook.net" />
<link rel="dns-prefetch" href="//platform.linkedin.com" />
<link rel="dns-prefetch" href="//platform.twitter.com" />




<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script>
  (function () {
    const googleFont = document.createElement("link");
    googleFont.href = "https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Signika:wght@500;700&display=swap";
    googleFont.type = "text/css";
    googleFont.rel = "stylesheet";
    document.head.appendChild(googleFont);
  })();
</script>





  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  











  
  



<link
  href="/css/style.min.8ef7e2337b4ec5b98ac0105e2048da1c3cbeb3a86af2977e9de45531095f6197.css"
  integrity="sha256-jvfiM3tOxbmKwBBeIEjaHDy+s6hq8pd+neRVMQlfYZc="
  rel="stylesheet" />


<link
  defer
  async
  rel="stylesheet"
  href="/css/style-lazy.min.1891ab9d1988b9b19756de1bbea47aecb95c7b5ab195f6fe52244b6eca5d8154.css"
  integrity="sha256-GJGrnRmIubGXVt4bvqR67Llce1qxlfb+UiRLbspdgVQ="
  media="print"
  onload="this.media='all'; this.onload=null;" />


  </head>

  <body>
    
    
      



      

    


    
    





    
    <header
  class="header sticky top-0 z-30">
  <nav class="navbar container">
    
    <div class="order-0">
      
      <a class="navbar-brand block" href="/">
        















  









  
  
  


  
  
    
    
  


  
  
      
      
    
    
    
    
    
    
  
  

  
  
    
    
      
      


      
      
        
        
        
        

        
        
        
      
      
    
  
  

  
    <img
      fetchpriority="high"
      decoding="async"
      class="img img-light"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />

    <img
      fetchpriority="high"
      decoding="async"
      class="img img-dark"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />
  
  


      </a>
    </div>
    
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1">
      <svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20">
        <title>Menu Open</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
      <svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20">
        <title>Menu Close</title>
        <polygon
          points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
          transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    

    
    <ul
      id="nav-menu"
      class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8 nav-menu-adjust">
      
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/"
              >Home</a
            >
          </li>
        
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/about"
              >About</a
            >
          </li>
        
      
        
        
        
        
          <li class="nav-item nav-dropdown group relative">
            <span
              class="nav-link 
                
                
                
              
                
                
                
              
                
                
                
              
                
                
                
               inline-flex items-center">
              Projects
              <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20">
                <path
                  d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </span>
            <ul
              class="nav-dropdown-list lg:group-hover:visible lg:group-hover:opacity-100">
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/modern-medicine">
                    MODERN MEDICINE
                  </a>
                </li>
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/final-bounty">
                    Final Bounty
                  </a>
                </li>
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/webgl">
                    WebGL Engine
                  </a>
                </li>
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/mario-game">
                    Italian Plumber World
                  </a>
                </li>
              
            </ul>
          </li>
        
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/"
              ></a
            >
          </li>
        
      
      
    </ul>

    <div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0">
      
        
      

      

      


  <div class="theme-switcher mr-5 hidden">
    <input id="theme-switcher" data-theme-switcher type="checkbox" />
    <label for="theme-switcher">
      <span class="sr-only">theme switcher</span>
      <span>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-100 dark:opacity-0"
          viewBox="0 0 56 56"
          fill="#fff"
          height="16"
          width="16">
          <path
            d="M30 4.6c0-1-.9-2-2-2a2 2 0 0 0-2 2v5c0 1 .9 2 2 2s2-1 2-2Zm9.6 9a2 2 0 0 0 0 2.8c.8.8 2 .8 2.9 0L46 13a2 2 0 0 0 0-2.9 2 2 0 0 0-3 0Zm-26 2.8c.7.8 2 .8 2.8 0 .8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9 0-.7.8-.7 2.1 0 3ZM28 16a12 12 0 0 0-12 12 12 12 0 0 0 12 12 12 12 0 0 0 12-12 12 12 0 0 0-12-12Zm23.3 14c1.1 0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 0 0-2 2c0 1.1 1 2 2 2ZM4.7 26a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2Zm37.8 13.6a2 2 0 0 0-3 0 2 2 0 0 0 0 2.9l3.6 3.5a2 2 0 0 0 2.9 0c.8-.8.8-2.1 0-3ZM10 43.1a2 2 0 0 0 0 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1 0-2.9-.8-.8-2-.8-2.9 0Zm20 3.4c0-1.1-.9-2-2-2a2 2 0 0 0-2 2v4.9c0 1 .9 2 2 2s2-1 2-2Z" />
        </svg>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-0 dark:opacity-100"
          viewBox="0 0 24 24"
          fill="none"
          height="16"
          width="16">
          <path
            fill="#000"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4 0 0 0 8.7 1.8c1-.3 2 .5 1.5 1.5v.1a10.3 10.3 0 0 1-9.4 6.2A10.3 10.3 0 0 1 3.2 6.7c1-2 2.9-3.5 4.9-4.4Z" />
        </svg>
      </span>
    </label>
  </div>

  
  <script>
    var darkMode = true;

    

    if (localStorage.getItem("theme") === "dark"){darkMode = true}
    else if (localStorage.getItem("theme") === "light"){darkMode = false}

    if (darkMode){document.documentElement.classList.add("dark")}
    else {document.documentElement.classList.remove("dark")}

    
    document.addEventListener("DOMContentLoaded", () => {
      var themeSwitch = document.querySelectorAll("[data-theme-switcher]");
      var themeSwitcherContainer = document.querySelector('.theme-switcher');

      [].forEach.call(themeSwitch, function (ts) {
        ts.checked = darkMode;
        ts.addEventListener("click", () => {
          document.documentElement.classList.toggle("dark");
          localStorage.setItem(
            "theme",
            document.documentElement.classList.contains("dark") ? "dark" : "light"
          );
        });
      });

      
      themeSwitcherContainer.classList.remove('hidden');
    });
  </script>




      
      
    </div>
  </nav>
</header>

    




  




    <main>
      
  <section>
  <div class="container text-center">
    <div
      class="from-body to-theme-light dark:from-darkmode-body dark:to-darkmode-theme-light rounded-2xl bg-gradient-to-b px-8 py-14">
      <h1>Building a Cylinder Primitive</h1>
      
    </div>
  </div>
</section>



  <section class="section-sm">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="content">
            <p>Cylinders are represented as a stack of circles, with each circle&rsquo;s vertices connected with those above and below it. The radius of each circle does not have to be equivalent. In the case where they are not, the object is considered a cone. The vertices are found by dividing the <b>360 degrees</b> of the circle by <b>n slices</b> to find the angle between each vertex. Then using this and the length of the radius, the vertices are placed. Then, for the top and bottom circles, triangles are generated by connecting each vertex to its next neighbor, then those two points to the midpoint.</p>
<p>Then, the <b>height</b> of the circle is divided into <b>n stacks</b>. Each stack is a circle that is generated &ldquo;above&rdquo; the next. For denser cylinders, there are many &ldquo;inner&rdquo; circles. Because the height of the cylinder and the number of circles are variable, the radii of the inner circles has to be calculated. This is found by using the ratio of the difference between the top and bottom circles and the height.</p>
<p>To calculate the normal at each vertex, we need to know the angle of the outer wall of the cylinder. This is found by creating a triangle out of the height of the triangle and the difference between the top and bottom radii.</p>






  



<div class="accordion ">
  <button class="accordion-header " data-accordion>
    Angle calculation
    <svg
      class="accordion-icon"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      xmlspace="preserve">
      <path
        fill="currentColor"
        d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0 s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667 C514.096,145.416,514.096,131.933,505.755,123.592z"></path>
    </svg>
  </button>
  <div class="accordion-content ">
    <p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">generateAngle</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">height</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">biggerRad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radBase</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">radTop</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">radBase</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">radTop</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">smallerRad</span> <span style="color:#f92672">=</span>  <span style="color:#a6e22e">radBase</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">radTop</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">radTop</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">radBase</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleBase</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">biggerRad</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">smallerRad</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">angle</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">atan</span>(<span style="color:#a6e22e">height</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">triangleBase</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">radTop</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">radBase</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">angle</span> <span style="color:#f92672">*</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">angle</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></p>
  </div>
</div>

<p>After calculating the positions and normals, the last calculation is finding the indices of points on these 2D circles to be grouped together during triangle generation. The index array holds the indices of points in the position array rather than copying the points to save space. Every 3 points in the array are considered a grouping which will later be turned into a triangle. For 2D circles, each grouping contains the midpoint of the circle followed by the two outer vertices it connects to.</p>






  



<div class="accordion ">
  <button class="accordion-header " data-accordion>
    2D Circle Vertex Position, Normal, and Index Generation
    <svg
      class="accordion-icon"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      xmlspace="preserve">
      <path
        fill="currentColor"
        d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0 s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667 C514.096,145.416,514.096,131.933,505.755,123.592z"></path>
    </svg>
  </button>
  <div class="accordion-content ">
    <p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">radius</span>, <span style="color:#a6e22e">numPoints</span>, <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">centerNormalY</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">positions</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">indices</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">normals</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//init origin at the start
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">y</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//init circle points
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">numPoints</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> ((<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> (Math.<span style="color:#a6e22e">PI</span>)) <span style="color:#f92672">/</span> (<span style="color:#a6e22e">numPoints</span>)) <span style="color:#75715e">//in radians
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">cos</span>(<span style="color:#a6e22e">rad</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">z</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">sin</span>(<span style="color:#a6e22e">rad</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">dist</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">sqrt</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">z</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">z</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">dist</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">tan</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">angle</span>) <span style="color:#75715e">//this.angle calculated previously using generateAngle()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">x</span>) <span style="color:#75715e">//x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">y</span>) <span style="color:#75715e">//y
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">z</span>) <span style="color:#75715e">//z
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">yOffset</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">z</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">numPoints</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>) <span style="color:#75715e">//midpoint
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>) 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//last triangle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">numPoints</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">positions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">positions</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">indices</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">indices</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">normals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">normals</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ret</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></p>
  </div>
</div>

<p>The perimiter of the circles are then connected to those above and below it in a similar way to how the circles were generated. If we wanted to make a cone, we can adjust the radii of each stack accordingly (e.g. larger radius on the bottom and smaller radius on top).</p>






  



<div class="accordion ">
  <button class="accordion-header " data-accordion>
    Connecting Two Stacked Circles
    <svg
      class="accordion-icon"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      xmlspace="preserve">
      <path
        fill="currentColor"
        d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0 s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667 C514.096,145.416,514.096,131.933,505.755,123.592z"></path>
    </svg>
  </button>
  <div class="accordion-content ">
    <p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>    <span style="color:#a6e22e">connectCirclesTriangle</span>(<span style="color:#a6e22e">bottomPos</span>, <span style="color:#a6e22e">topPos</span>, <span style="color:#a6e22e">len</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleOne</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleTwo</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleOne</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleTwo</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//last triangle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleOne</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleTwo</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleOne</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleTwo</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ret</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div></p>
  </div>
</div>







  



<div class="accordion ">
  <button class="accordion-header " data-accordion>
    Full Cylinder Class
    <svg
      class="accordion-icon"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      xmlspace="preserve">
      <path
        fill="currentColor"
        d="M505.755,123.592c-8.341-8.341-21.824-8.341-30.165,0L256.005,343.176L36.421,123.592c-8.341-8.341-21.824-8.341-30.165,0 s-8.341,21.824,0,30.165l234.667,234.667c4.16,4.16,9.621,6.251,15.083,6.251c5.462,0,10.923-2.091,15.083-6.251l234.667-234.667 C514.096,145.416,514.096,131.933,505.755,123.592z"></path>
    </svg>
  </button>
  <div class="accordion-content ">
    <p><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">cylinder</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">constructor</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#a6e22e">numStacks</span>, <span style="color:#a6e22e">color</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">angle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateAngle</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">height</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">init</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateCylinderData</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#a6e22e">numStacks</span>, <span style="color:#a6e22e">color</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">combinedVertexIndices</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">init</span>.<span style="color:#a6e22e">combinedVertexIndices</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">init</span>.<span style="color:#a6e22e">combinedVertexPositions</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">init</span>.<span style="color:#a6e22e">combinedVertexNormals</span> 
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">indices</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">combinedVertexIndices</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">positions</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">combinedVertexPositions</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">normals</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">combinedVertexNormals</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">radius</span>, <span style="color:#a6e22e">numPoints</span>, <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">centerNormalY</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">positions</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">indices</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">normals</span> <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//init origin at the start
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">y</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//init circle points
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">numPoints</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> ((<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> (Math.<span style="color:#a6e22e">PI</span>)) <span style="color:#f92672">/</span> (<span style="color:#a6e22e">numPoints</span>)) <span style="color:#75715e">//in radians
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">cos</span>(<span style="color:#a6e22e">rad</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">z</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radius</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">sin</span>(<span style="color:#a6e22e">rad</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">dist</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">sqrt</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">z</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">z</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">yOffset</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">dist</span> <span style="color:#f92672">*</span> Math.<span style="color:#a6e22e">tan</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">angle</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">x</span>) <span style="color:#75715e">//x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">y</span>) <span style="color:#75715e">//y
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">positions</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">z</span>) <span style="color:#75715e">//z
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">x</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">centerNormalY</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">yOffset</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">normals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">z</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">offset</span> <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">numPoints</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>) <span style="color:#75715e">//midpoint
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>) 
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//last triangle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">numPoints</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">push</span>(<span style="color:#ae81ff">0</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">positions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">positions</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">indices</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">indices</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">normals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">normals</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ret</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//bottomPos and topPos are the index in the combined array that each respective element starts at
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//len is the length of each list
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">//list is the combined list with all the positions
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">connectCirclesTriangle</span>(<span style="color:#a6e22e">bottomPos</span>, <span style="color:#a6e22e">topPos</span>, <span style="color:#a6e22e">len</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleOne</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleTwo</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleOne</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleTwo</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//last triangle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleOne</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleTwo</span> <span style="color:#f92672">=</span> [<span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">bottomPos</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">topPos</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleOne</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">triangleTwo</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ret</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">generateAngle</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">height</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">biggerRad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radBase</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">radTop</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">radBase</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">radTop</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">smallerRad</span> <span style="color:#f92672">=</span>  <span style="color:#a6e22e">radBase</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">radTop</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">radTop</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">radBase</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">triangleBase</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">biggerRad</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">smallerRad</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">angle</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">atan</span>(<span style="color:#a6e22e">height</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">triangleBase</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">radTop</span> <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">radBase</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">angle</span> <span style="color:#f92672">*</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">angle</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">generateCylinderData</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#a6e22e">numStacks</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//prime deltas
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">radDelta</span><span style="color:#f92672">=</span> (<span style="color:#a6e22e">radBase</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">radTop</span>) <span style="color:#f92672">/</span> (<span style="color:#a6e22e">numStacks</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">workingRad</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">radBase</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">heightDelta</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">height</span> <span style="color:#f92672">/</span> (<span style="color:#a6e22e">numStacks</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">workingHeight</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//create the base
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bottomCircle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">bottomCircleDuplicate</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">radBase</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">bottomCircle</span>.<span style="color:#a6e22e">positions</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">bottomCircle</span>.<span style="color:#a6e22e">normals</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//create the top
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">topCircle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">bottomCircle</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">topCircleDuplicate</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">radTop</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#a6e22e">height</span>, <span style="color:#a6e22e">bottomCircle</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//create stacks
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">numStacks</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">workingRad</span> <span style="color:#f92672">-=</span> <span style="color:#a6e22e">radDelta</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">workingHeight</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">heightDelta</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tempCircle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">generateCircle</span>(<span style="color:#a6e22e">workingRad</span>, <span style="color:#a6e22e">numSlices</span>, <span style="color:#a6e22e">workingHeight</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">tempCircle</span>.<span style="color:#a6e22e">positions</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexNormals</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">tempCircle</span>.<span style="color:#a6e22e">normals</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">topCircle</span>.<span style="color:#a6e22e">positions</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexNormals</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">topCircle</span>.<span style="color:#a6e22e">normals</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">start</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">topCircleDuplicate</span>.<span style="color:#a6e22e">positions</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexNormals</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">topCircleDuplicate</span>.<span style="color:#a6e22e">normals</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">nextStart</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">bottomCircleDuplicate</span>.<span style="color:#a6e22e">positions</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexNormals</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">bottomCircleDuplicate</span>.<span style="color:#a6e22e">normals</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/////////////////////////////////////////////////////////
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">topCircleDuplicate</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">topCircleDuplicate</span>.<span style="color:#a6e22e">indices</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">+=</span> <span style="color:#a6e22e">start</span>
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">bottomCircleDuplicate</span>.<span style="color:#a6e22e">indices</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">+=</span> <span style="color:#a6e22e">nextStart</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//create top and bottom face triangles
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">combinedVertexIndices</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">bottomCircleDuplicate</span>.<span style="color:#a6e22e">indices</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">topCircleDuplicate</span>.<span style="color:#a6e22e">indices</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Connect all of the slices together
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">numStacks</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">offset</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">*</span> (<span style="color:#a6e22e">numSlices</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">len</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">numSlices</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">connectCirclesTriangle</span>(<span style="color:#a6e22e">offset</span>, <span style="color:#a6e22e">offset</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">len</span>, <span style="color:#a6e22e">len</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">combinedVertexIndices</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexIndices</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">result</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ret</span> <span style="color:#f92672">=</span> {}
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">combinedVertexIndices</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexIndices</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">combinedVertexPositions</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexPositions</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ret</span>.<span style="color:#a6e22e">combinedVertexNormals</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">combinedVertexNormals</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ret</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></p>
  </div>
</div>

<hr>







  

  

  



  

  

  



  

  

  



  

  

  



  

  

  



<a href="https://willaltman.tech/webgl#Primitives" class="btn btn-primary "  rel="" >Back</a>


          </div>
        </div>
      </div>
    </div>
  </section>

    </main>

    
    <footer class="bg-theme-light dark:bg-darkmode-theme-light">
  <div class="container">
    <div class="row items-center py-10">
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left">
        
        <a
          class="navbar-brand inline-block"
          href="/">
          















  









  
  
  


  
  
    
    
  


  
  
      
      
    
    
    
    
    
    
  
  

  
  
    
    
      
      


      
      
        
        
        
        

        
        
        
      
      
    
  
  

  
    <img
      fetchpriority="high"
      decoding="async"
      class="img img-light"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />

    <img
      fetchpriority="high"
      decoding="async"
      class="img img-dark"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />
  
  


        </a>
      </div>
      <div class="lg:col-6 mb-8 text-center lg:mb-0">
        <ul>
          
            <li class="m-3 inline-block">
              <a
                
                href="
                  /about
                "
                >About</a
              >
            </li>
          
            <li class="m-3 inline-block">
              <a
                
                href="
                  /resume.pdf
                "
                >Résumé</a
              >
            </li>
          
        </ul>
      </div>
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right">
        <ul class="social-icons">
          
            <li>
              <a
                target="_blank"
                aria-label="roblox"
                rel="nofollow noopener"
                href="https://www.roblox.com/users/9095598/profile">
                <i class="fas fa-gamepad"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="linkedin"
                rel="nofollow noopener"
                href="https://www.linkedin.com/in/will-altman-1982561b3">
                <i class="fab fa-linkedin"></i>
              </a>
            </li>
          
        </ul>
      </div>
    </div>
  </div>
  <div class="border-border dark:border-darkmode-border border-t py-7">
    <div class="text-light dark:text-darkmode-light container text-center">
      <p>
        © 2025 Will Altman
      </p>
    </div>
  </div>
</footer>



    
    



  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  










  
  



<script
  crossorigin="anonymous"
  integrity="sha256-LO9JECYLqyMcpGlrtxZcpUn0I8AvhO6oIIibJZv4zbk="
  src="/js/script.min.2cef4910260bab231ca4696bb7165ca549f423c02f84eea820889b259bf8cdb9.js"></script>


<script
  defer
  async
  crossorigin="anonymous"
  integrity="sha256-w&#43;aS42D2&#43;B&#43;Jix&#43;joZ7pAua1vbu/pRK/IhoP55b8n3w="
  src="/js/script-lazy.min.c3e692e360f6f81f898b1fa3a19ee902e6b5bdbbbfa512bf221a0fe796fc9f7c.js"></script>



<script>
  if ('serviceWorker' in navigator){navigator.serviceWorker.register("/service-worker.js");}
</script>






  












  



  </body>
</html>
