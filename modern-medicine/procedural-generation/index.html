<!doctype html>
<html
  itemscope
  class=""
  lang="en-us"
  itemtype="http://schema.org/WebPage">
  <head>
    
    <meta charset="utf-8" />


<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=5" />


<meta name="theme-name" content="hugoplate" />















<link rel="shortcut icon" href="/images/favicon_hu8746059088890723258.png" type="image/x-icon">
<link rel="icon" href="/images/favicon_hu8746059088890723258.png" type="image/x-icon">
<link rel="icon" type="image/png" sizes="48x48" href="/images/favicon_hu11713732441643767409.png">
<link rel="icon" type="image/png" sizes="96x96" href="/images/favicon_hu8746059088890723258.png">
<link rel="apple-touch-icon" sizes="144x144" href="/images/favicon_hu13781583406303279869.png">








<link rel="manifest" href="/manifest.webmanifest" />
<meta
  name="msapplication-TileColor"
  content="#ddd" />
<meta
  name="theme-color"
  content="#ffffff" />






















  <base href="https://willaltman.tech/modern-medicine/procedural-generation/" />







  
  


<title>MM Procedural Generation</title>















  <meta
    name="keywords"
    content="Altman, GameDev, Developer" />




<meta
  name="description"
  content="MM Procedural Generation" />



  <meta name="author" content="Will Altman" />






  
  












  

  
  
  


  
  


  





<meta property="og:title" content="MM Procedural Generation" />
<meta property="og:description" content="MM Procedural Generation" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://willaltman.tech/modern-medicine/procedural-generation/" />


<meta name="twitter:title" content="MM Procedural Generation" />
<meta name="twitter:description" content="MM Procedural Generation" />


  <meta name="twitter:site" content="@PrizmROBLOX" />


  <meta name="twitter:creator" content="@Will Altman" />



















<script>
  let indexURL = "https://willaltman.tech/searchindex.json";
  let includeSectionsInSearch = ["blog"];
  let search_no_results = "No results for";
  let search_initial_message = "Type something to search..";
</script>























    
    
<meta http-equiv="x-dns-prefetch-control" content="on" />
<link rel="preconnect" href="https://use.fontawesome.com" crossorigin />
<link rel="preconnect" href="//cdnjs.cloudflare.com" />
<link rel="preconnect" href="//www.googletagmanager.com" />
<link rel="preconnect" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="https://use.fontawesome.com" />
<link rel="dns-prefetch" href="//ajax.googleapis.com" />
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
<link rel="dns-prefetch" href="//www.googletagmanager.com" />
<link rel="dns-prefetch" href="//www.google-analytics.com" />
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//connect.facebook.net" />
<link rel="dns-prefetch" href="//platform.linkedin.com" />
<link rel="dns-prefetch" href="//platform.twitter.com" />




<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script>
  (function () {
    const googleFont = document.createElement("link");
    googleFont.href = "https://fonts.googleapis.com/css2?family=Heebo:wght@400;600&family=Signika:wght@500;700&display=swap";
    googleFont.type = "text/css";
    googleFont.rel = "stylesheet";
    document.head.appendChild(googleFont);
  })();
</script>





  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  











  
  



<link
  href="/css/style.min.ea031a6ceb83d494805aeb552703dbdb9fd1b8e2baa1fbd0002074dd23e10c06.css"
  integrity="sha256-6gMabOuD1JSAWutVJwPb25/RuOK6ofvQACB03SPhDAY="
  rel="stylesheet" />


<link
  defer
  async
  rel="stylesheet"
  href="/css/style-lazy.min.1891ab9d1988b9b19756de1bbea47aecb95c7b5ab195f6fe52244b6eca5d8154.css"
  integrity="sha256-GJGrnRmIubGXVt4bvqR67Llce1qxlfb+UiRLbspdgVQ="
  media="print"
  onload="this.media='all'; this.onload=null;" />


  </head>

  <body>
    
    
      



      

    


    
    





    
    <header
  class="header sticky top-0 z-30">
  <nav class="navbar container">
    
    <div class="order-0">
      
      <a class="navbar-brand block" href="/">
        















  









  
  
  


  
  
    
    
  


  
  
      
      
    
    
    
    
    
    
  
  

  
  
    
    
      
      


      
      
        
        
        
        

        
        
        
      
      
    
  
  

  
    <img
      fetchpriority="high"
      decoding="async"
      class="img img-light"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />

    <img
      fetchpriority="high"
      decoding="async"
      class="img img-dark"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />
  
  


      </a>
    </div>
    
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="order-3 cursor-pointer flex items-center lg:hidden text-dark dark:text-white lg:order-1">
      <svg id="show-button" class="h-6 fill-current block" viewBox="0 0 20 20">
        <title>Menu Open</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
      <svg id="hide-button" class="h-6 fill-current hidden" viewBox="0 0 20 20">
        <title>Menu Close</title>
        <polygon
          points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2"
          transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    

    
    <ul
      id="nav-menu"
      class="navbar-nav order-3 hidden lg:flex w-full pb-6 lg:order-1 lg:w-auto lg:space-x-2 lg:pb-0 xl:space-x-8 nav-menu-adjust">
      
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/"
              >Home</a
            >
          </li>
        
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/about"
              >About</a
            >
          </li>
        
      
        
        
        
        
          <li class="nav-item nav-dropdown group relative">
            <span
              class="nav-link 
                
                
                
              
                
                
                
              
                
                
                
              
                
                
                
               inline-flex items-center">
              Projects
              <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20">
                <path
                  d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
              </svg>
            </span>
            <ul
              class="nav-dropdown-list lg:group-hover:visible lg:group-hover:opacity-100">
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/modern-medicine">
                    MODERN MEDICINE
                  </a>
                </li>
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/final-bounty">
                    Final Bounty
                  </a>
                </li>
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/webgl">
                    WebGL Engine
                  </a>
                </li>
              
                
                
                <li class="nav-dropdown-item">
                  <a
                    class="nav-dropdown-link "
                    
                    href="/mario-game">
                    Italian Plumber World
                  </a>
                </li>
              
            </ul>
          </li>
        
      
        
        
        
        
          <li class="nav-item">
            <a
              class="nav-link "
              
              href="/"
              ></a
            >
          </li>
        
      
      
    </ul>

    <div class="order-1 ml-auto flex items-center md:order-2 lg:ml-0">
      
        
      

      

      


  <div class="theme-switcher mr-5 hidden">
    <input id="theme-switcher" data-theme-switcher type="checkbox" />
    <label for="theme-switcher">
      <span class="sr-only">theme switcher</span>
      <span>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-100 dark:opacity-0"
          viewBox="0 0 56 56"
          fill="#fff"
          height="16"
          width="16">
          <path
            d="M30 4.6c0-1-.9-2-2-2a2 2 0 0 0-2 2v5c0 1 .9 2 2 2s2-1 2-2Zm9.6 9a2 2 0 0 0 0 2.8c.8.8 2 .8 2.9 0L46 13a2 2 0 0 0 0-2.9 2 2 0 0 0-3 0Zm-26 2.8c.7.8 2 .8 2.8 0 .8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9 0-.7.8-.7 2.1 0 3ZM28 16a12 12 0 0 0-12 12 12 12 0 0 0 12 12 12 12 0 0 0 12-12 12 12 0 0 0-12-12Zm23.3 14c1.1 0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 0 0-2 2c0 1.1 1 2 2 2ZM4.7 26a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2Zm37.8 13.6a2 2 0 0 0-3 0 2 2 0 0 0 0 2.9l3.6 3.5a2 2 0 0 0 2.9 0c.8-.8.8-2.1 0-3ZM10 43.1a2 2 0 0 0 0 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1 0-2.9-.8-.8-2-.8-2.9 0Zm20 3.4c0-1.1-.9-2-2-2a2 2 0 0 0-2 2v4.9c0 1 .9 2 2 2s2-1 2-2Z" />
        </svg>
        
        <svg
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 opacity-0 dark:opacity-100"
          viewBox="0 0 24 24"
          fill="none"
          height="16"
          width="16">
          <path
            fill="#000"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8.2 2.2c1-.4 2 .6 1.6 1.5-1 3-.4 6.4 1.8 8.7a8.4 8.4 0 0 0 8.7 1.8c1-.3 2 .5 1.5 1.5v.1a10.3 10.3 0 0 1-9.4 6.2A10.3 10.3 0 0 1 3.2 6.7c1-2 2.9-3.5 4.9-4.4Z" />
        </svg>
      </span>
    </label>
  </div>

  
  <script>
    var darkMode = true;

    

    if (localStorage.getItem("theme") === "dark"){darkMode = true}
    else if (localStorage.getItem("theme") === "light"){darkMode = false}

    if (darkMode){document.documentElement.classList.add("dark")}
    else {document.documentElement.classList.remove("dark")}

    
    document.addEventListener("DOMContentLoaded", () => {
      var themeSwitch = document.querySelectorAll("[data-theme-switcher]");
      var themeSwitcherContainer = document.querySelector('.theme-switcher');

      [].forEach.call(themeSwitch, function (ts) {
        ts.checked = darkMode;
        ts.addEventListener("click", () => {
          document.documentElement.classList.toggle("dark");
          localStorage.setItem(
            "theme",
            document.documentElement.classList.contains("dark") ? "dark" : "light"
          );
        });
      });

      
      themeSwitcherContainer.classList.remove('hidden');
    });
  </script>




      
      
    </div>
  </nav>
</header>

    




  




    <main>
      
  <section>
  <div class="container text-center">
    <div
      class="from-body to-theme-light dark:from-darkmode-body dark:to-darkmode-theme-light rounded-2xl bg-gradient-to-b px-8 py-14">
      <h1>MODERN MEDICINE Procedural Generation</h1>
      
    </div>
  </div>
</section>



  <section class="section-sm">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="content">
            <h3 id="procedural-generation">Procedural Generation</h3>
<h6 id="1-representing-the-world">1. Representing the world</h6>
<p>One thing that hasn&rsquo;t changed much since its initial prototype is how the world is abstractly represented in code. The level is stored in an n x m array of nodes, with each node containing information about what exists in that location (e.g. is this a room, hallway, doorway, what biome is this, etc&hellip;). Nodes also store a reference to their neighbors, creating a graph. Being able to look up nodes in both an array or explore nodes as a graph provides important flexibility in how the game interacts with the world since many corners of the code base use this core system.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-A debug visualization of the node graph">
      
        <a
          href="/images/mm/pics/level-console-debug.png"
          class="glightbox" data-glightbox="description: .caption-A-debug-visualization-of-the-node-graph">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="500"
            height="493"
            src="/images/mm/pics/level-console-debug_hu9073148654774452497.png"
            alt="Console debug world visualization"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/level-console-debug_hu9073148654774452497.png'" />
      
        </a>
      
        <figcaption id="caption-A debug visualization of the node graph" class="caption-A-debug-visualization-of-the-node-graph">
          A debug visualization of the node graph
        </figcaption>
      </figure>
    

  
  






  <script>
    window.addEventListener("load", (e) => {
      const lightbox = GLightbox();
    });
  </script>


<h6 id="2-the-hallways-must-be-interesting-to-walk-through">2. The hallways must be interesting to walk through</h6>
<p>The first prototype for hallway generation was simple: place the rooms randomly on a grid, then use A* to connect each doorway node to every other doorway node, prioritizing previously placed hallways. Then, randomly select several hallway nodes and expand them to create unique biomes.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-An early prototype example of procedural world generation">
      
        <a
          href="/images/mm/pics/procedural-gen-proto.png"
          class="glightbox" data-glightbox="description: .caption-An-early-prototype-example-of-procedural-world-generation">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="500"
            height="398"
            src="/images/mm/pics/procedural-gen-proto_hu8978034997542039531.png"
            alt="A series of rooms connected by straight hallways"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/procedural-gen-proto_hu8978034997542039531.png'" />
      
        </a>
      
        <figcaption id="caption-An early prototype example of procedural world generation" class="caption-An-early-prototype-example-of-procedural-world-generation">
          An early prototype example of procedural world generation
        </figcaption>
      </figure>
    

  
  







<p>While this prototype did achieve our goal procedural generation goals, it had one major issue revealed by early playtests: walking for minutes on end through a straight hallway isn&rsquo;t fun. So it was back to the drawing board. The level generation system had to be snakey and interesting while also not being overly frustrating or confusing to navigate like a maze would be.</p>
<p>The first solution was to utilize node weights in the A* algorithm for more than just prioritizing previously generated hallways. What if every node had a random weight value? This was better, but the sheer randomness was obvious when playing. The hallways had to seem at least somewhat realistic and a straight maze was not an option I wanted to entertain. Stumped, I looked towards other games that used procedural generation for inspiration and eventually looked towards Minecraft. Minecraft utilizes perlin noise to create &ldquo;natural&rdquo; looking curves and features in its terrain generation. What if I generated the node weights for the hallways using perlin noise? I had just implemented a technique I would later learn is called Perlin Worm Tunneling.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-An early example of procedural world generation utilizing perlin worm tunneling">
      
        <a
          href="/images/mm/pics/perlin-example.png"
          class="glightbox" data-glightbox="description: .caption-An-early-example-of-procedural-world-generation-utilizing-perlin-worm-tunneling">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="685"
            height="500"
            src="/images/mm/pics/perlin-example_hu11671213877469198173.png"
            alt="A series of rooms connected by bendy hallways"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/perlin-example_hu11671213877469198173.png'" />
      
        </a>
      
        <figcaption id="caption-An early example of procedural world generation utilizing perlin worm tunneling" class="caption-An-early-example-of-procedural-world-generation-utilizing-perlin-worm-tunneling">
          An early example of procedural world generation utilizing perlin worm tunneling
        </figcaption>
      </figure>
    

  
  







<h6 id="3-biomes">3. Biomes</h6>
<p>My next goal was to implement a more interesting biome system with the goal of having fewer, larger biomes. To do this, I simply recycled the idea of using perlin noise. Once the initial map and hallways are generated, I create a new perlin noise map for the nodes. Then, I select a node at random to be an anchor point for a random biome. I generate another set of values, each +/- n from the anchor point&rsquo;s noise value. Then, manifest destiny style, I add the surrounding nodes to this anchor point&rsquo;s biome grouping provided that the surrounding nodes have not been added to a different biome already and are within the +/- n range generated earlier. This process is repeated DFS style with all of the captured nodes until there are no more neighbors within the range. Then, a different random (unclaimed) node is chosen to be a new anchor and the process repeats. This continues until a predetermined percentage of all the nodes are captured, with the remaining nodes being classified as the default biome.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-The different colors above the hallways represent certain biome types">
      
        <a
          href="/images/mm/pics/biome-example.png"
          class="glightbox" data-glightbox="description: .caption-The-different-colors-above-the-hallways-represent-certain-biome-types">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="577"
            height="500"
            src="/images/mm/pics/biome-example_hu7070551091969716453.png"
            alt="A series of rooms connected by bendy hallways, each with specific biomes"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/biome-example_hu7070551091969716453.png'" />
      
        </a>
      
        <figcaption id="caption-The different colors above the hallways represent certain biome types" class="caption-The-different-colors-above-the-hallways-represent-certain-biome-types">
          The different colors above the hallways represent certain biome types
        </figcaption>
      </figure>
    

  
  







<p>To add additional flair to the hallways, &ldquo;straightaway&rdquo; portions are detected and generate with unique designs.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-Straightaways are denoted by the cyan color. Each biome has unique straightaway designs.">
      
        <a
          href="/images/mm/pics/straightaway.png"
          class="glightbox" data-glightbox="description: .caption-Straightaways-are-denoted-by-the-cyan-color-Each-biome-has-unique-straightaway-designs">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="662"
            height="500"
            src="/images/mm/pics/straightaway_hu4332081565582284750.png"
            alt="A series of rooms connected by bendy hallways with straightaways visualized"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/straightaway_hu4332081565582284750.png'" />
      
        </a>
      
        <figcaption id="caption-Straightaways are denoted by the cyan color. Each biome has unique straightaway designs." class="caption-Straightaways-are-denoted-by-the-cyan-color-Each-biome-has-unique-straightaway-designs">
          Straightaways are denoted by the cyan color. Each biome has unique straightaway designs.
        </figcaption>
      </figure>
    

  
  
























  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-Straightaway portions of hallways have unique, repeatable designs that span multiple nodes">
      
        <a
          href="/images/mm/pics/straightaway-experimentation.png"
          class="glightbox" data-glightbox="description: .caption-Straightaway-portions-of-hallways-have-unique-repeatable-designs-that-span-multiple-nodes">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="799"
            height="500"
            src="/images/mm/pics/straightaway-experimentation_hu4022964574383898664.png"
            alt="A green hallway with unique designs on the walls"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/straightaway-experimentation_hu4022964574383898664.png'" />
      
        </a>
      
        <figcaption id="caption-Straightaway portions of hallways have unique, repeatable designs that span multiple nodes" class="caption-Straightaway-portions-of-hallways-have-unique-repeatable-designs-that-span-multiple-nodes">
          Straightaway portions of hallways have unique, repeatable designs that span multiple nodes
        </figcaption>
      </figure>
    

  
  







<p>Some biomes may have unique features that require their assets to be larger than the size of one node. In the medfloor biome, the ceiling is curved like a train tunnel. For tight angles, additional assets beyond the bounds of a single node are needed. All walls are generated with these additional assets, and those which exist outside of a hallway node are deleted at runtime to prevent clipping issues.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-Arches beyond the bounds of a single node will be removed at runtime if they do not exist within a hallway node with the medfloor biome.">
      
        <a
          href="/images/mm/pics/corner-arch.png"
          class="glightbox" data-glightbox="description: .caption-Arches-beyond-the-bounds-of-a-single-node-will-be-removed-at-runtime-if-they-do-not-exist-within-a-hallway-node-with-the-medfloor-biome">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="787"
            height="500"
            src="/images/mm/pics/corner-arch_hu9483995667494361880.png"
            alt="A wall with a curving arch"
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/corner-arch_hu9483995667494361880.png'" />
      
        </a>
      
        <figcaption id="caption-Arches beyond the bounds of a single node will be removed at runtime if they do not exist within a hallway node with the medfloor biome." class="caption-Arches-beyond-the-bounds-of-a-single-node-will-be-removed-at-runtime-if-they-do-not-exist-within-a-hallway-node-with-the-medfloor-biome">
          Arches beyond the bounds of a single node will be removed at runtime if they do not exist within a hallway node with the medfloor biome.
        </figcaption>
      </figure>
    

  
  
























  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      

      
        
        
      


      

      
      
        
        
        
      
      
      
      

    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-The arches must extend beyond the size of a single node to be flush with other arches.">
      
        <a
          href="/images/mm/pics/medfloor.png"
          class="glightbox" data-glightbox="description: .caption-The-arches-must-extend-beyond-the-size-of-a-single-node-to-be-flush-with-other-arches">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="687"
            height="494"
            src="/images/mm/pics/medfloor_hu8474804930144497015.png"
            alt="A mysterious hallway with curved ceilings and vines hanging off the walls."
            onerror="this.onerror='null';this.src='\/images\/mm\/pics\/medfloor_hu8474804930144497015.png'" />
      
        </a>
      
        <figcaption id="caption-The arches must extend beyond the size of a single node to be flush with other arches." class="caption-The-arches-must-extend-beyond-the-size-of-a-single-node-to-be-flush-with-other-arches">
          The arches must extend beyond the size of a single node to be flush with other arches.
        </figcaption>
      </figure>
    

  
  







<h6 id="4-rooms">4. Rooms</h6>
<p>At runtime, several core rooms are selected to be placed into the world randomly, then several &ldquo;shortcut&rdquo; and &ldquo;loot&rdquo; rooms are randomly selected and placed around the world. Most rooms in the game feature at least some degree of procedural generation. Take the medfloor for example. This room has the player duck into rooms in order to dodge a wandering radiation monster. To make this interesting throughout multiple playthroughs, the layout of the room changes.</p>
<p>The core layout of the room consists of an L shape. On several sides of the L shape, one of 4 different layouts can generate. Within these layouts, random room designs generate. Notice the long L hallway is the same in all of the below pictures, but the surrounding designs change.</p>





















  
  <div
    class=" gallery 
      zoomable
    ">
    
      
      
      
        












  
  
    
    
  
  
  


  
  
    

    
    


    
    
    
    
    
    
    
    


    

    
    
    
      
      
        
        
      
      
    


    
  


  


        
        
        
        

        <div class="gallery-item">
          
            <a
              href="/images/mm/pics/medfloor-layouts/medfloor-A.png"
              style="display: block;"
              class="glightbox">
              <img
                loading="lazy"
                src="/images/mm/pics/medfloor-layouts/medfloor-A_hu1533039328844543245.png"
                class="img"
                style="margin: 0;"
                alt="medfloor-A.png"
                onerror="this.onerror='null';this.src='\/images\/mm\/pics\/medfloor-layouts\/medfloor-A_hu1533039328844543245.png'" />
            </a>
          
        </div>
      
    
      
      
      
        












  
  
    
    
  
  
  


  
  
    

    
    


    
    
    
    
    
    
    
    


    

    
    
    
      
      
        
        
      
      
    


    
  


  


        
        
        
        

        <div class="gallery-item">
          
            <a
              href="/images/mm/pics/medfloor-layouts/medfloor-B.png"
              style="display: block;"
              class="glightbox">
              <img
                loading="lazy"
                src="/images/mm/pics/medfloor-layouts/medfloor-B_hu813179119119010370.png"
                class="img"
                style="margin: 0;"
                alt="medfloor-B.png"
                onerror="this.onerror='null';this.src='\/images\/mm\/pics\/medfloor-layouts\/medfloor-B_hu813179119119010370.png'" />
            </a>
          
        </div>
      
    
      
      
      
        












  
  
    
    
  
  
  


  
  
    

    
    


    
    
    
    
    
    
    
    


    

    
    
    
      
      
        
        
      
      
    


    
  


  


        
        
        
        

        <div class="gallery-item">
          
            <a
              href="/images/mm/pics/medfloor-layouts/medfloor-C.png"
              style="display: block;"
              class="glightbox">
              <img
                loading="lazy"
                src="/images/mm/pics/medfloor-layouts/medfloor-C_hu9850677197337668609.png"
                class="img"
                style="margin: 0;"
                alt="medfloor-C.png"
                onerror="this.onerror='null';this.src='\/images\/mm\/pics\/medfloor-layouts\/medfloor-C_hu9850677197337668609.png'" />
            </a>
          
        </div>
      
    
    
  </div>

  

<h6 id="4-navigation">4. Navigation</h6>
<p>Later playtests leading up to the launch of the game revealed another issue: being lost in the hallways is frustrating. The player needed some sort of indication if they were getting closer to their target room. This prompted the development of direction panels placed randomly throughout the world. When activated, an arrow illuminates on the panel pointing towards the correct direction, and a line temporarily appears on the floor to aid with navigation.</p>

















  





  
  
  


  
  
    
    
      
    

    


    
    


    
    
    
    
    
    
    


    
    
      
      
      
    
    

    
    
      <figure
        class="img-center"
        role="group"
        aria-describedby="caption-Direction panels can be activated to assist with navigation.">
      
        <a
          href="/images/mm/gifs/direction-panel.gif"
          class="glightbox" data-glightbox="description: .caption-Direction-panels-can-be-activated-to-assist-with-navigation">
      
          <img
            title="image title"
            loading="lazy"
            decoding="async"
            class="img img-fluid"
            width="800"
            height="500"
            src="/images/mm/gifs/direction-panel.gif"
            alt="A panel on the wall being activated to show an arrow pointing the direction to go."
            onerror="this.onerror='null';this.src=''" />
      
        </a>
      
        <figcaption id="caption-Direction panels can be activated to assist with navigation." class="caption-Direction-panels-can-be-activated-to-assist-with-navigation">
          Direction panels can be activated to assist with navigation.
        </figcaption>
      </figure>
    

  
  







<p>There is more to displaying the correct arrow on the panel than it may seem. Direction panels have a chance of generating on any of the existing walls of a hallway node (north, east, south, west). First, the node the panel exists in is mathematically calculated, then the node object is retrieved for use based off its coordinates. To find the correct direction, the A* system used in world generation is recycled to pathfind from the panel&rsquo;s node to one of the destination room&rsquo;s doorways. This path is then sent to the client to display the on-floor line. On the server the direction of the path is calculated by finding both the unit vector between the source node&rsquo;s midpoint and the first node in the path&rsquo;s midpoint (for direction), as well as the unit vector between the source node&rsquo;s midpoint and the direction panel (the arrow will &ldquo;face&rdquo; a different direction depending on what wall it is on). Using these two vectors, the correct facing arrow can be selected and displayed as needed.</p>







  

  

  



  

  

  



  

  

  



  

  

  



  

  

  



<a href="https://willaltman.tech/modern-medicine#Procedural-Generation" class="btn btn-primary "  rel="" >Back</a>


          </div>
        </div>
      </div>
    </div>
  </section>

    </main>

    
    <footer class="bg-theme-light dark:bg-darkmode-theme-light">
  <div class="container">
    <div class="row items-center py-10">
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:text-left">
        
        <a
          class="navbar-brand inline-block"
          href="/">
          















  









  
  
  


  
  
    
    
  


  
  
      
      
    
    
    
    
    
    
  
  

  
  
    
    
      
      


      
      
        
        
        
        

        
        
        
      
      
    
  
  

  
    <img
      fetchpriority="high"
      decoding="async"
      class="img img-light"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />

    <img
      fetchpriority="high"
      decoding="async"
      class="img img-dark"
      width="160"
      height="32"
      src="/images/name-icon_hu14768301767699835405.webp"
      alt="Will Altman"
      onerror="this.onerror=null;this.src='\/images\/name-icon_hu14170043961657880537.png';" />
  
  


        </a>
      </div>
      <div class="lg:col-6 mb-8 text-center lg:mb-0">
        <ul>
          
            <li class="m-3 inline-block">
              <a
                
                href="
                  /about
                "
                >About</a
              >
            </li>
          
            <li class="m-3 inline-block">
              <a
                
                href="
                  /resume.pdf
                "
                >Résumé</a
              >
            </li>
          
        </ul>
      </div>
      <div class="lg:col-3 mb-8 text-center lg:mb-0 lg:mt-0 lg:text-right">
        <ul class="social-icons">
          
            <li>
              <a
                target="_blank"
                aria-label="roblox"
                rel="nofollow noopener"
                href="https://www.roblox.com/users/9095598/profile">
                <i class="fas fa-gamepad"></i>
              </a>
            </li>
          
            <li>
              <a
                target="_blank"
                aria-label="linkedin"
                rel="nofollow noopener"
                href="https://www.linkedin.com/in/will-altman-1982561b3">
                <i class="fab fa-linkedin"></i>
              </a>
            </li>
          
        </ul>
      </div>
    </div>
  </div>
  <div class="border-border dark:border-darkmode-border border-t py-7">
    <div class="text-light dark:text-darkmode-light container text-center">
      <p>
        © 2025 Will Altman
      </p>
    </div>
  </div>
</footer>



    
    



  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  

  
    
      
    
  










  
  



<script
  crossorigin="anonymous"
  integrity="sha256-LO9JECYLqyMcpGlrtxZcpUn0I8AvhO6oIIibJZv4zbk="
  src="/js/script.min.2cef4910260bab231ca4696bb7165ca549f423c02f84eea820889b259bf8cdb9.js"></script>


<script
  defer
  async
  crossorigin="anonymous"
  integrity="sha256-w&#43;aS42D2&#43;B&#43;Jix&#43;joZ7pAua1vbu/pRK/IhoP55b8n3w="
  src="/js/script-lazy.min.c3e692e360f6f81f898b1fa3a19ee902e6b5bdbbbfa512bf221a0fe796fc9f7c.js"></script>



<script>
  if ('serviceWorker' in navigator){navigator.serviceWorker.register("/service-worker.js");}
</script>






  












  



  </body>
</html>
